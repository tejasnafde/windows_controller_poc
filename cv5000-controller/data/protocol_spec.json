{
  "protocol": {
    "name": "Topcon CV-5000 Serial Protocol",
    "type": "ASCII text-based",
    "format": "SOH + COMMAND + CR + PARAMS + CR + ... + EOT",
    "bytes": {
      "SOH": "0x01",
      "CR": "0x0D",
      "EOT": "0x04"
    }
  },
  "connection": {
    "port": "COM7",
    "baudrate": 9600,
    "data_bits": 8,
    "parity": "None",
    "stop_bits": 1
  },
  "commands": {
    "B": {
      "name": "Set Lens Prescription",
      "description": "Set complete prescription for both eyes",
      "format": "B\\rR\\r{r_sph}\\r{r_cyl}\\r{r_axis}\\rL\\r{l_sph}\\r{l_cyl}\\r{l_axis}\\r{mode1}\\r{mode2}\\r{display}",
      "example": "01 42 0D 52 0D 2D 20 30 2E 32 35 0D 20 20 30 2E 30 30 0D 20 20 20 30 0D 4C 0D 20 20 30 2E 30 30 0D 20 20 30 2E 30 30 0D 20 20 20 30 0D 30 31 0D 30 31 0D 30 0D 04"
    },
    "D": {
      "name": "Set Pupillary Distance",
      "description": "Set PD value in millimeters",
      "format": "D\\r{pd_value}",
      "example": "01 44 0D 36 33 2E 35 0D 04"
    },
    "c": {
      "name": "Chart Control",
      "description": "Control chart display and auxiliary functions",
      "format": "c\\r{subcommand}\\r{params}",
      "example": "01 63 0D 45 0D 04"
    },
    "ln": {
      "name": "Set Chart Line",
      "description": "Select visual acuity line/level",
      "format": "ln\\r{line_number}",
      "example": "01 6C 6E 0D 31 0D 04"
    },
    "v": {
      "name": "Version Query",
      "description": "Query device version information",
      "format": "v\\r{query_type}",
      "example": "01 76 0D 50 53 0D 04"
    },
    "r": {
      "name": "Reset Device",
      "description": "Reset/initialize device",
      "format": "r",
      "example": "01 72 0D 04"
    }
  },
  "value_ranges": {
    "sphere": {
      "min": -20.0,
      "max": 20.0,
      "step": 0.25,
      "unit": "diopters"
    },
    "cylinder": {
      "min": -6.0,
      "max": 0.0,
      "step": 0.25,
      "unit": "diopters"
    },
    "axis": {
      "min": 0,
      "max": 180,
      "step": 1,
      "unit": "degrees"
    },
    "pd": {
      "min": 50.0,
      "max": 80.0,
      "step": 0.5,
      "unit": "mm"
    }
  }
}

